<?php 	//********************	//** WEB MIRACLE TECHNOLOGIES	//********************		// get post		$appTable = $_POST['appTable'];		$item_id = (isset($_POST['item_id']) ? $_POST['item_id'] : 0);		$cardUpd = array(					'name'			=> $_POST['name'],					'alias'			=> $_POST['alias'],					'short_name'			=> $_POST['short_name'],					'house_id'			=> $_POST['house_id'],					'caption'			=> $_POST['caption'],					'order_id'			=> (int)$_POST['order_id'],										'block'			=> $_POST['block'][0],					'created' => date('Y-m-d H:i:s', time()),					'modified' => date('Y-m-d H:i:s', time())	);				$alias = $_POST["alias"];	$house_id = $_POST["house_id"];	$q = "SELECT M.id FROM `osc_sys_rooms` AS M WHERE M.alias = '$alias' AND M.house_id = '$house_id' LIMIT 1";		$check_alias = $ah->rs($q,1);		if (!$check_alias) {			if ($_POST["short_name"]) {				$query = "INSERT INTO [pre]$appTable ";				$fieldsStr = " ( ";								$valuesStr = " ( ";						$cntUpd = 0;				foreach($cardUpd as $field => $itemUpd)				{					$cntUpd++;										$fieldsStr .= ($cntUpd==1 ? "`$field`" : ", `$field`");										$valuesStr .= ($cntUpd==1 ? "'$itemUpd'" : ", '$itemUpd'");				}								$fieldsStr .= " ) ";								$valuesStr .= " ) ";								$query .= $fieldsStr." VALUES ".$valuesStr;					$item_id = $ah->rs($query,0,1,1);				if($item_id)				{					$data['item_id'] = $item_id;				}else				{					$data['item_id'] = 0;				}				$data['real_item_id'] = $item_id;				$data['status'] = "success";				$data['message'] = "Категория комнат успешно сохранена.";			}else{				$data["message"] = "Укажите название в фильтре на сайте.";			}		}else{			$data["message"] = "Такая категория уже существует по выбраному дому.";		}				