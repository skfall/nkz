<?phpnamespace App\Controller;use Cake\Core\Configure;use Cake\Network\Exception\ForbiddenException;use Cake\Network\Exception\NotFoundException;use Cake\View\Exception\MissingTemplateException;class NewsController extends AppController{	public function news(){		$page = "news";		$PA = "news";		$table = "osc_page_news_items";		if (!$this->Model->checkBlock("news")) $this->Help->r2(RS.'404/');		// PAGINATION        $pag = $this->Model->getPagination($table, 9); // CAT ID || PER PAGE        $num_pages = $pag['num_pages'];        $cur_page = $pag['cur_page'];        $start = $pag['start'];        $per_page = $pag['per_page'];        $menu_name = $this->Model->getMenuByAlias("news")['name'];        $preloader_page_name = $menu_name;		$news = $this->Model->getNews($start, $per_page);		$meta_data = $this->Model->getPageMetaData('osc_page_news');		if (isset($meta_data['meta_title']) && $meta_data['meta_title']) {			$meta_title = $meta_data['meta_title'];			$this->set('meta_title', $meta_title);		}		if (isset($meta_data['meta_desc']) && $meta_data['meta_desc']) {			$meta_desc = $meta_data['meta_desc'];			$this->set('meta_desc', $meta_desc);		}		if (isset($meta_data['meta_keys']) && $meta_data['meta_keys']) {			$meta_keys = $meta_data['meta_keys'];			$this->set('meta_keys', $meta_keys);		}		$this->set([			'preloader_page_name' => $preloader_page_name,			'page' => $page,			'PA' => $PA,			'news' => $news,			'num_pages' => $num_pages,            'cur_page' => $cur_page,            'menu_name' => $menu_name		]);	}		public function item(){		$page = "news_item";		$PA = "news";		$template = 1;		$id = (int)LA;		$news_array = $this->Model->getNewsItem($id);		if (!$news_array['item']) $this->Help->r2(RS.'404/');		$news_item = $news_array['item'];		$news_gal = $news_array['gal'];		$template = $news_item['template'];		$menu_name = $this->Model->getMenuByAlias("news")['name'];		$preloader_page_name = $menu_name;		$meta_data = $this->Model->getPageMetaData('osc_page_news_items', $id);		if (isset($meta_data['meta_title']) && $meta_data['meta_title']) {			$meta_title = $meta_data['meta_title'];			$this->set('meta_title', $meta_title);		}		if (isset($meta_data['meta_desc']) && $meta_data['meta_desc']) {			$meta_desc = $meta_data['meta_desc'];			$this->set('meta_desc', $meta_desc);		}		if (isset($meta_data['meta_keys']) && $meta_data['meta_keys']) {			$meta_keys = $meta_data['meta_keys'];			$this->set('meta_keys', $meta_keys);		}				$this->set([			'preloader_page_name' => $preloader_page_name,			'page' => $page,			'template' => $template,			'PA' => $PA,			'news_item' => $news_item,			'news_gal' => $news_gal,			'template' => $template,			'menu_name' => $menu_name		]);	}}